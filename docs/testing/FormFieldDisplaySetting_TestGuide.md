# Form Field Display Setting 功能測試指南

## 功能概述
這個功能允許用戶在 EFormDesigner 中設定表單字段的顯示標籤，並在 PendingTasksPage 中以雙行表格結構顯示表單摘要。

## 測試步驟

### 1. 數據庫更新
首先執行數據庫更新腳本：
```sql
-- 執行 Database/Add_FieldDisplaySettings_To_eFormDefinitions.sql
```

### 2. 測試 EFormDesigner 字段設定功能

#### 2.1 創建新表單
1. 進入 EFormDesigner 頁面
2. 設計一個包含多種字段類型的表單：
   - 文本輸入框 (input[type="text"])
   - 電子郵件輸入框 (input[type="email"])
   - 電話輸入框 (input[type="tel"])
   - 日期選擇器 (input[type="date"])
   - 下拉選擇框 (select)
   - 文本域 (textarea)
   - 單選按鈕 (input[type="radio"])
   - 複選框 (input[type="checkbox"])

#### 2.2 測試字段顯示設定
1. 在表單設計完成後，點擊「字段顯示設定」按鈕（齒輪圖標）
2. 檢查是否正確掃描出所有字段：
   - 字段類型是否正確識別
   - 原始標籤是否正確提取
   - 字段ID是否正確生成

#### 2.3 自定義字段設定
1. 修改顯示標籤：
   - 將 "Full Name" 改為 "姓名"
   - 將 "Email" 改為 "電子郵件"
   - 將 "Phone" 改為 "電話號碼"

2. 控制顯示字段：
   - 取消勾選某些字段的「在列表中顯示」
   - 只保留重要的字段用於摘要顯示

3. 保存設定並關閉模態框

#### 2.4 保存表單
1. 點擊「保存表單」按鈕
2. 檢查後端日誌是否記錄了字段顯示設定的保存
3. 檢查數據庫中 `eFormDefinitions` 表的 `field_display_settings` 字段

### 3. 測試 PendingTasksPage 雙行表格

#### 3.1 創建表單實例
1. 使用剛才創建的表單創建一個表單實例
2. 填寫表單內容並提交

#### 3.2 檢查雙行表格顯示
1. 進入 PendingTasksPage
2. 檢查表格行是否正確顯示雙行結構：
   - **主行**：表單名稱（粗體）
   - **子行**：字段摘要（小字體，藍色背景的標籤）

#### 3.3 驗證字段摘要
1. 檢查字段摘要是否正確顯示：
   - 只顯示設定為「在列表中顯示」的字段
   - 顯示標籤是否為自定義的標籤
   - 字段值是否正確解析

2. 檢查摘要樣式：
   - 字段標籤和值是否在藍色背景的標籤中
   - 是否正確顯示「+N 更多」提示（如果字段超過3個）

#### 3.4 測試不同狀態
1. 批准表單實例，檢查「已批准」標籤頁
2. 拒絕表單實例，檢查「已拒絕」標籤頁
3. 確認所有標籤頁都正確顯示雙行結構

### 4. 測試邊界情況

#### 4.1 無字段設定的表單
1. 創建一個沒有字段顯示設定的表單
2. 檢查是否顯示「無字段摘要」

#### 4.2 空表單
1. 創建一個沒有輸入字段的表單
2. 檢查字段設定模態框是否顯示「未找到表單字段」

#### 4.3 大量字段
1. 創建一個包含10+字段的表單
2. 檢查摘要是否只顯示前3個字段
3. 檢查是否正確顯示「+N 更多」提示

### 5. 測試響應式設計

#### 5.1 不同屏幕尺寸
1. 調整瀏覽器窗口大小
2. 檢查表格是否正確適應
3. 檢查字段摘要是否正確換行

#### 5.2 表格滾動
1. 檢查橫向滾動是否正常工作
2. 檢查固定列（選擇列）是否正確顯示

### 6. 測試性能

#### 6.1 大量數據
1. 創建多個表單實例
2. 檢查頁面載入性能
3. 檢查字段解析性能

#### 6.2 內存使用
1. 檢查瀏覽器開發者工具的內存使用
2. 確認沒有內存洩漏

## 預期結果

### 成功指標
1. ✅ 字段設定模態框正確掃描並顯示所有字段
2. ✅ 自定義標籤和顯示設定正確保存
3. ✅ PendingTasksPage 正確顯示雙行表格結構
4. ✅ 字段摘要正確顯示自定義標籤和值
5. ✅ 所有狀態標籤頁都正確顯示摘要
6. ✅ 響應式設計正常工作
7. ✅ 性能表現良好

### 錯誤處理
1. ✅ 無字段設定的表單正確顯示「無字段摘要」
2. ✅ 空表單正確顯示「未找到表單字段」
3. ✅ 大量字段正確顯示「+N 更多」提示
4. ✅ 網絡錯誤時正確顯示錯誤信息

## 故障排除

### 常見問題
1. **字段掃描失敗**：檢查 HTML 結構是否正確
2. **字段值解析失敗**：檢查 HTML 中是否有正確的 value 屬性
3. **樣式問題**：檢查自定義 CSS 是否正確載入
4. **API 錯誤**：檢查後端日誌和數據庫連接

### 調試工具
1. 瀏覽器開發者工具
2. 後端日誌
3. 數據庫查詢
4. 網絡請求監控

## 完成測試後
如果所有測試都通過，功能就成功實現了！用戶現在可以：
1. 在表單設計器中設定字段顯示標籤
2. 在待處理任務頁面快速查看表單摘要
3. 享受更好的用戶體驗和更高的信息密度
